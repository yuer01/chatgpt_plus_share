(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages_plugs-system-user-list"],{"180b":function(e,t,a){"use strict";a.r(t);var o=a("7754"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},"1c92":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,"close-on-click-modal":!0,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"before-action":e.form1.props.beforeAction,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},n=[]},"2f18":function(e,t,a){"use strict";a.r(t);var o=a("a5a34"),n=a("8a0d");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var r=a("f0c5"),l=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"6d5dd580",null,!1,o["a"],void 0);t["default"]=l.exports},3762:function(e,t,a){"use strict";a.r(t);var o=a("95a9"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},6451:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"page-body"},[a("vk-data-table-query",{attrs:{columns:e.queryForm1.columns},on:{search:function(t){arguments[0]=t=e.$handleEvent(t),e.search.apply(void 0,arguments)}},model:{value:e.queryForm1.formData,callback:function(t){e.$set(e.queryForm1,"formData",t)},expression:"queryForm1.formData"}}),a("v-uni-view",{staticClass:"vk-table-button-box"},[a("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.addBtn.apply(void 0,arguments)}}},[e._v("添加")]),e.table1.multipleSelection?a("el-dropdown",{attrs:{"split-button":!1,trigger:"click"},on:{command:function(t){arguments[0]=t=e.$handleEvent(t),e.batchBtn.apply(void 0,arguments)}}},[a("el-button",{attrs:{type:"danger",size:"small",disabled:0===e.table1.multipleSelection.length}},[e._v("批量操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:1}},[e._v("账号批量解冻")]),a("el-dropdown-item",{attrs:{command:2}},[e._v("账号批量冻结")]),a("el-dropdown-item",{attrs:{command:3}},[e._v("批量设置可登录的应用")])],1)],1):e._e(),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-tools",disabled:!e.table1.selectItem},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindRoleBtn.apply(void 0,arguments)}}},[e._v("角色绑定")]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-warning-outline",disabled:!e.table1.selectItem},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.resetPasswordBtn.apply(void 0,arguments)}}},[e._v("重置密码")])],1),a("vk-data-table",{ref:"table1",attrs:{action:e.table1.action,columns:e.table1.columns,"query-form-param":e.queryForm1,"right-btns":["detail_auto","update","delete"],selection:!0,"row-no":!0,pagination:!0},on:{update:function(t){arguments[0]=t=e.$handleEvent(t),e.updateBtn.apply(void 0,arguments)},delete:function(t){arguments[0]=t=e.$handleEvent(t),e.deleteBtn.apply(void 0,arguments)},"current-change":function(t){arguments[0]=t=e.$handleEvent(t),e.currentChange.apply(void 0,arguments)},"selection-change":function(t){arguments[0]=t=e.$handleEvent(t),e.selectionChange.apply(void 0,arguments)}}}),a("vk-data-dialog",{attrs:{title:e.form1.props.title,width:"580px",top:"4vh",mode:"form"},model:{value:e.form1.props.show,callback:function(t){e.$set(e.form1.props,"show",t)},expression:"form1.props.show"}},[a("vk-data-form",{ref:"form1",attrs:{rules:e.form1.props.rules,action:e.form1.props.action,"form-type":e.form1.props.formType,columns:e.form1.props.columns,"label-width":"120px","max-height":"700px"},on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.form1.props.show=!1,e.refresh()}},model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1),a("bindRole",{model:{value:e.formDatas.bindRole,callback:function(t){e.$set(e.formDatas,"bindRole",t)},expression:"formDatas.bindRole"}}),a("resetPassword",{model:{value:e.formDatas.resetPassword,callback:function(t){e.$set(e.formDatas,"resetPassword",t)},expression:"formDatas.resetPassword"}}),a("setAuthorizedAppLogin",{on:{success:function(t){arguments[0]=t=e.$handleEvent(t),e.refresh.apply(void 0,arguments)}},model:{value:e.formDatas.setAuthorizedAppLogin,callback:function(t){e.$set(e.formDatas,"setAuthorizedAppLogin",t)},expression:"formDatas.setAuthorizedAppLogin"}})],1)},n=[]},7754:function(e,t,a){"use strict";a("7a82");var o=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d"),a("c975"),a("3c65"),a("14d9");var n,i=o(a("2f18")),r=o(a("aa3c")),l=o(a("8e84")),s=uni.vk,d={},u=[{value:1,label:"男"},{value:2,label:"女"},{value:0,label:"保密"}],p=[],c={components:{bindRole:i.default,resetPassword:r.default,setAuthorizedAppLogin:l.default},data:function(){return{loading:!1,data:{},table1:{action:"admin/system/user/sys/getList",columns:[{key:"avatar",title:"头像",type:"avatar",width:80},{key:"username",title:"用户名",type:"text",width:180,defaultValue:"未设置"},{key:"nickname",title:"昵称",type:"text",width:180,defaultValue:"未设置"},{key:"mobile",title:"手机号",type:"text",width:120,defaultValue:"未绑定"},{key:"appList",title:"可登录的应用",type:"html",width:220,formatter:function(e,t,a,o){if("undefined"===typeof t.dcloud_appid)return"全部应用";if(0===t.dcloud_appid.length)return"未绑定任何应用";if(0===e.length&&t.dcloud_appid.length>0)return t.dcloud_appid;var n="";return e.map((function(e,t){n+="、".concat(e.name)})),n&&(n=n.substring(1)),n}},{key:"role",title:"角色",type:"text",width:120,defaultValue:"无"},{key:"comment",title:"备注",type:"text",width:160},{key:"allow_login_background",title:"允许登录后台",type:"tag",width:140,defaultValue:!1,sortable:"custom",data:[{value:!0,label:"允许",tagType:"success"},{value:!1,label:"禁止",tagType:"danger"}]},{key:"status",title:"账户状态",type:"tag",width:120,defaultValue:0,sortable:"custom",data:[{value:0,label:"正常",tagType:"success"},{value:1,label:"冻结",tagType:"danger"},{value:2,label:"审核中",tagType:"primary"},{value:3,label:"审核拒绝",tagType:"info"}]},{key:"gender",title:"性别",type:"radio",width:80,defaultValue:0,sortable:"custom",data:u},{key:"register_date",title:"注册时间",type:"time",width:160,sortable:"custom"},{key:"last_login_date",title:"最后登录时间",type:"dateDiff",width:130,defaultValue:"从未登录过",sortable:"custom"},{key:"last_login_ip",title:"最后登录ip",type:"text",width:120,defaultValue:"从未登录过"},{key:"_id",title:"id",type:"text",width:280}],multipleSelection:[],selectItem:""},queryForm1:{formData:{dcloud_appid:""},columns:[{key:"dcloud_appid",title:"所属应用",type:"select",width:160,mode:"custom",data:[],props:{value:"appid",label:"name"}},{key:"username",title:"用户名",type:"text",width:160,mode:"%%"},{key:"nickname",title:"昵称",type:"text",width:140,mode:"%%"},{key:"mobile",title:"手机号",type:"text",width:140,mode:"%%"},{key:"_id",title:"ID",type:"text",width:140,mode:"="},{key:"register_date",title:"注册时间",type:"datetimerange",width:380,mode:"[]"},{key:"allow_login_background",hidden:!0,mode:"="}]},form1:{data:{gender:0,login_appid_type:1,allow_login_background:!1},props:{action:"",columns:[{key:"username",title:"用户名",type:"text",show:["add"]},{key:"nickname",title:"昵称",type:"text"},{key:"gender",title:"性别",type:"radio",data:u},{key:"password",title:"密码",type:"text",tips:"若密码为空，则默认为234567",show:["add"]},{key:"mobile",title:"手机号",type:"text"},{key:"login_appid_type",title:"登录权限",type:"radio",optionType:"button",data:[{value:1,label:"部分应用"},{value:0,label:"全部应用"}],onChange:function(e,t,a,o,i){n.form1.data.allow_login_background=1!==e}},{key:"dcloud_appid",title:"可登录的应用",type:"checkbox",border:!0,itemWidth:100,data:[],props:{value:"appid",label:"name"},showRule:"login_appid_type=1",onChange:function(e,t,a,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=!1;i.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type&&e.type.indexOf("admin")>-1&&(r=!0)})),1===n.form1.data.login_appid_type?n.form1.data.allow_login_background=r:n.form1.data.allow_login_background=!0}},{key:"comment",title:"备注",type:"textarea",maxlength:"99",showWordLimit:!0,autosize:{minRows:2,maxRows:10}}],rules:{username:[{required:!0,validator:s.pubfn.validator("username"),message:"用户名以字母开头，长度在6~18之间，只能包含字母、数字和下划线",trigger:"blur"}],nickname:[{required:!0,message:"昵称为必填字段",trigger:"blur"},{min:2,max:20,message:"昵称长度在 2 到 20 个字符",trigger:"blur"}],password:[{validator:s.pubfn.validator("password"),message:"密码长度在6~18之间，只能包含字母、数字和下划线",trigger:"blur"}],mobile:[{validator:s.pubfn.validator("mobile"),message:"手机号格式错误",trigger:"blur"}]},formType:"",show:!1}},formDatas:{}}},onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=this,s=n.vk,n.options=e,n.init(e)},onReady:function(){},onShow:function(){},onHide:function(){},methods:{init:function(e){d["form1"]=s.pubfn.copyObject(n.form1),n.getAppList()},getAppList:function(e){s.callFunction({url:"admin/system/app/sys/getList",data:{},success:function(e){p=e.rows;var t=s.pubfn.copyObject(e.rows),a=s.pubfn.copyObject(e.rows),o=s.pubfn.getListIndex(n.form1.props.columns,"key","dcloud_appid");n.form1.props.columns[o].data=t,a.unshift({appid:"___error___",name:"不存在的应用"}),a.unshift({appid:"___empty-array___",name:"未绑定应用"}),a.unshift({appid:"___non-existent___",name:"全部应用"});var i=s.pubfn.getListIndex(n.queryForm1.columns,"key","dcloud_appid");n.queryForm1.columns[i].data=a;var r=[];p.map((function(e,t){r.push(e.appid)})),n.queryForm1.formData.appids=r}})},pageTo:function(e){s.navigateTo(e)},resetForm:function(){s.pubfn.resetForm(d,n)},search:function(){n.$refs.table1.query()},refresh:function(){n.$refs.table1.refresh()},getCurrentRow:function(e){return n.$refs.table1.getCurrentRow(e)},currentChange:function(e){n.table1.selectItem=e},selectionChange:function(e){n.table1.multipleSelection=e},addBtn:function(){n.resetForm(),n.form1.props.action="admin/system/user/sys/add",n.form1.props.formType="add",n.form1.props.title="添加",n.form1.props.show=!0},updateBtn:function(e){var t=e.item;n.form1.props.action="admin/system/user/sys/update",n.form1.props.formType="update",n.form1.props.title="编辑",n.form1.props.show=!0,t.login_appid_type="undefined"===typeof t.dcloud_appid?0:1,n.form1.data=t},deleteBtn:function(e){var t=e.item,a=e.deleteFn;a({action:"admin/system/user/sys/delete",data:{_id:t._id}})},batchBtn:function(e){switch(e){case 1:n.frozen(0);break;case 2:n.frozen(1);break;case 3:n.setAuthorizedAppLogin();break;default:break}},bindRoleBtn:function(){var e=n.getCurrentRow(!0);s.pubfn.openForm("bindRole",{item:e})},resetPasswordBtn:function(){var e=n.getCurrentRow(!0);s.pubfn.openForm("resetPassword",{item:e})},frozen:function(e){var t=[];n.table1.multipleSelection.map((function(e,a){t.push(e._id)})),s.callFunction({url:"admin/system/user/sys/batchUpdateStatus",title:"请求中...",data:{user_ids:t,status:e},success:function(e){n.$notify({message:"批量操作成功!",type:"success"}),n.refresh()}})},setAuthorizedAppLogin:function(){var e=[];n.table1.multipleSelection.map((function(t,a){e.push(t._id)})),n.formDatas.setAuthorizedAppLogin={show:!0,item:{user_ids:e,dcloudAppidData:p}}}},watch:{},filters:{},computed:{}};t.default=c},8133:function(e,t,a){"use strict";var o;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=uni.vk,i={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:""}}}},data:function(){return{page:{title:"重置密码",submitText:"修改",cancelText:"关闭",showCancel:!0,top:"7vh",width:"600px",loading:!1},data:{},form1:{data:{user_id:"",password:""},props:{action:"admin/system/user/sys/resetPassword",columns:[{key:"user_id",title:"用户",type:"text"},{key:"password",title:"新密码",type:"password",showPassword:!0}],rules:{user_id:[{required:!0,message:"user_id不能为空",trigger:"change"}],password:[{required:!0,message:"新密码不能为空",trigger:"change"},{validator:n.pubfn.validator("password"),message:"密码长度在6~18之间，只能包含字母、数字和下划线",trigger:"change"}]},labelWidth:"100px",labelPosition:"left"}}}},mounted:function(){o=this,o.init()},methods:{init:function(){var e=o,t=e.value;o.$emit("input",t)},onOpen:function(){o=this;var e=o.value.item,t=void 0===e?{}:e,a=n.pubfn.copyObject(t);o.data=a,o.form1.data={user_id:a._id,password:""}},onClose:function(){o.$refs.form1.resetForm()},onFormSuccess:function(){o.value.show=!1,o.$emit("success")}},watch:{},computed:{}};t.default=i},"8a0d":function(e,t,a){"use strict";a.r(t);var o=a("d173"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},"8e84":function(e,t,a){"use strict";a.r(t);var o=a("1c92"),n=a("3762");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var r=a("f0c5"),l=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"2fb764a4",null,!1,o["a"],void 0);t["default"]=l.exports},"95a9":function(e,t,a){"use strict";a("7a82");var o=a("4ea4").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("d81d");var n,i=o(a("53ca")),r=uni.vk,l={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:{}}}}},data:function(){return{page:{title:"标题",submitText:"确定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"800px"},form1:{data:{login_appid_type:1,mode:1},props:{action:"admin/system/user/sys/batchUpdateAppLogin",columns:[{key:"login_appid_type",title:"登录权限",type:"radio",optionType:"button",data:[{value:1,label:"部分应用"},{value:0,label:"全部应用"}]},{key:"mode",title:"模式",type:"radio",optionType:"button",data:[{value:1,label:"覆盖"},{value:2,label:"新增"},{value:3,label:"移除"}],showRule:"login_appid_type=1"},{key:"dcloud_appid",title:"可登录的应用",type:"checkbox",border:!0,itemWidth:100,data:[],props:{value:"appid",label:"name"},showRule:"login_appid_type=1&&mode=1"},{key:"dcloud_appid",title:"可登录的应用",type:"radio",border:!0,itemWidth:100,data:[],props:{value:"appid",label:"name"},showRule:"login_appid_type=1&&mode!=1"}],rules:{},labelWidth:"100px",beforeAction:function(e){var t=!1;if(e.login_appid_type)if("object"===(0,i.default)(e.dcloud_appid))e.dcloud_appid.map((function(e,a){var o=r.pubfn.getListItem(n.value.item.dcloudAppidData,"appid",e);"admin"===o.type&&(t=!0)}));else{var a=r.pubfn.getListItem(n.value.item.dcloudAppidData,"appid",e.dcloud_appid);"admin"===a.type&&(t=!0)}else t=!0;return e.user_ids=n.value.item.user_ids,e.allow_login_background=t,e}}}}},mounted:function(){n=this,n.init()},methods:{init:function(){var e=n,t=e.value;n.$emit("input",t)},onOpen:function(){n=this;var e=n.value.item,t=void 0===e?{}:e;n.form1.props.columns[2].data=t.dcloudAppidData,n.form1.props.columns[3].data=t.dcloudAppidData},onClose:function(){},onFormSuccess:function(){n.value.show=!1,n.$emit("success")}},watch:{},computed:{}};t.default=l},9822:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{directives:[{name:"loading",rawName:"v-loading",value:e.page.loading,expression:"page.loading"}],ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"user_id",fn:function(){return[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[e.data.avatar?a("el-avatar",{attrs:{src:e.data.avatar,fit:"cover"}}):e._e(),a("v-uni-text",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.data.nickname)+"（ID："+e._s(e.data._id)+"）")])],1)]},proxy:!0}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},n=[]},a5a34:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("vk-data-dialog",{attrs:{title:e.page.title,top:e.page.top,width:e.page.width,mode:"form"},on:{open:function(t){arguments[0]=t=e.$handleEvent(t),e.onOpen.apply(void 0,arguments)},closed:function(t){arguments[0]=t=e.$handleEvent(t),e.onClose.apply(void 0,arguments)}},model:{value:e.value.show,callback:function(t){e.$set(e.value,"show",t)},expression:"value.show"}},[a("vk-data-form",{directives:[{name:"loading",rawName:"v-loading",value:e.page.loading,expression:"page.loading"}],ref:"form1",attrs:{"form-type":e.value.mode,rules:e.form1.props.rules,action:e.form1.props.action,columns:e.form1.props.columns,loading:e.form1.props.loading,labelWidth:e.form1.props.labelWidth,"show-cancel":e.page.showCancel,"cancel-text":e.page.cancelText,"submit-text":e.page.submitText},on:{"update:loading":function(t){arguments[0]=t=e.$handleEvent(t),e.$set(e.form1.props,"loading",t)},success:function(t){arguments[0]=t=e.$handleEvent(t),e.onFormSuccess.apply(void 0,arguments)}},scopedSlots:e._u([{key:"user_id",fn:function(){return[a("v-uni-view",{staticStyle:{display:"flex","align-items":"center"}},[e.data.avatar?a("el-avatar",{attrs:{src:e.data.avatar,fit:"cover"}}):e._e(),a("v-uni-text",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(e.data.nickname)+"（ID："+e._s(e.data._id)+"）")])],1)]},proxy:!0}]),model:{value:e.form1.data,callback:function(t){e.$set(e.form1,"data",t)},expression:"form1.data"}})],1)},n=[]},aa3c:function(e,t,a){"use strict";a.r(t);var o=a("9822"),n=a("cf2e");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var r=a("f0c5"),l=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"02dace53",null,!1,o["a"],void 0);t["default"]=l.exports},cf2e:function(e,t,a){"use strict";a.r(t);var o=a("8133"),n=a.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return o[e]}))}(i);t["default"]=n.a},d173:function(e,t,a){"use strict";var o;a("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;uni.vk;var n={props:{value:{Type:Object,default:function(){return{show:!1,mode:"",item:""}}}},data:function(){return{page:{title:"角色绑定",submitText:"绑定",cancelText:"关闭",showCancel:!0,top:"7vh",width:"820px",loading:!1},data:{},form1:{data:{user_id:"",roleList:[],reset:!0},props:{action:"admin/system/user/sys/bindRole",columns:[{key:"user_id",title:"用户",type:"text"},{key:"roleList",title:"角色列表",type:"table-select",placeholder:"选择角色",action:"admin/system/role/sys/getList",columns:[{key:"role_name",title:"角色昵称",type:"text",nameKey:!0},{key:"role_id",title:"角色标识",type:"text",idKey:!0},{key:"comment",title:"备注",type:"text"}],formData:{enable:!0},queryColumns:[{key:"role_name",title:"角色昵称",type:"text",width:150,mode:"%%"},{key:"role_id",title:"角色标识",type:"text",width:150,mode:"%%"},{key:"enable",type:"text",mode:"=",hidden:!0}],multiple:!0,pageSize:10}],rules:{user_id:[{required:!0,message:"user_id不能为空",trigger:"change"}]},labelWidth:"100px",labelPosition:"left"}}}},mounted:function(){o=this,o.init()},methods:{init:function(){var e=o,t=e.value;o.$emit("input",t)},onOpen:function(){o=this;var e=o,t=e.value,a=t.item,n=a.role,i=void 0===n?[]:n,r=a._id;o.data=t.item,o.form1.props.show=!0,o.form1.data.user_id=r,o.form1.data.roleList=i},onClose:function(){o.$refs.form1.resetForm()},onFormSuccess:function(){o.$set(o.value.item,"role",o.form1.data.roleList),o.value.show=!1,o.$emit("success")}},watch:{},computed:{}};t.default=n},f3de:function(e,t,a){"use strict";a.r(t);var o=a("6451"),n=a("180b");for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);var r=a("f0c5"),l=Object(r["a"])(n["default"],o["b"],o["c"],!1,null,"233418a8",null,!1,o["a"],void 0);t["default"]=l.exports}}]);